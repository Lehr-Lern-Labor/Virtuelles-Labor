<!DOCTYPE html>
<html>

<head>
    <%- include('partials/head') %>
</head>

<body>
    <%- include('partials/header') %>

    <% if (locals.registerValid === true) { %>
        <div class="container" id="registerValid">
            <h2 style="text-align: center; margin-top: 30px;">Registration</h2>

            <form action="editRegistration" method="POST" style="max-width: 600px; margin: 0 auto">
                <hr />
                <div class="form-row" style="margin-bottom: -15px; margin-top: -15px">
                    <div class="form-group col-md-6">
                        <label for="staticUsername" class="col-form-label">Username</label>
                        <input class="form-control" type="text" placeholder="<%=username%>" readonly>
                    </div>
                </div>
                <hr />
                <input class="btn btn-block btn-submit" type="submit" value="Edit Registration"></button>
                <hr />
            </form>

            <form action="registerValid" method="POST" style="max-width: 600px; margin: 0 auto; margin-top:-20px">
                <hr />

                <div class="form-row">
                    <div class="form-group col-md-5">
                        <input type="text" class="form-control" id="inputForename" name="forename" placeholder="Forename"
                            required>
                    </div>

                    <div class="form-group col-md-5">
                        <input type="password" class="form-control" id="passwordInput" name="password" placeholder="Password"
                            required>
                    </div>
                </div>

                <input class="btn btn-block btn-submit" type="submit" value="Register now"
                    style="margin-bottom: 30px; "></button>
            </form>
        </div>

    <% } else { %>

        <div class="container" id="register">
            <h2 style="text-align: center; margin-top: 30px;">Registration</h2>
            <form action="register" method="POST" style="max-width: 600px; margin: 0 auto">
                <hr />
                <div class="form-group">
                    <input type="text" class="form-control" id="usernameInput" name="username"
                        placeholder="Username (2-10 chars)" maxlength="10" required>
                </div>

                <hr />
                <div class="row justify-content-left m-0 p-0">
                    <% if (locals.usernameTaken === true) { %>
                    <p style="font-size: small; color: red;"><i class="fa fa-times-circle wrongDataIcon"></i>The username
                        you entered is already taken. Please use another username to register.</p>
                    <% } else if (locals.verifyDataFailed === true) { %>
                    <p style="font-size: small; color: red;"><i class="fa fa-times-circle wrongDataIcon"></i>There's an
                        error while verifying the input data. Please try again.</p>
                    <% } else if (locals.invalidUsernameString === true) { %>
                    <p style="font-size: small; color: red;"><i class="fa fa-times-circle wrongDataIcon"></i>The username
                        you entered doesn't match our criteria. <br> It may only contains numbers, letters, and characters such as dash, underscore, or dot. <br> It may not contain 2 characters in a row or any characters at the start or at the end.</p>
                    <% } %>
                </div>
                <input class="btn btn-block btn-submit" type="submit" value="Verify" style="margin-bottom: 30px; "></button>

            </form>
        </div>
    <% } %>
</body>

</html>